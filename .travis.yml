language: cpp
sudo: required
compiler:
    - gcc

before_install:
    - sudo apt-add-repository -y ppa:boost-latest
    - sudo apt-add-repository -y ppa:ubuntu-sdk-team
    - sudo apt-add-repository -y ppa:ubuntu-toolchain-r/test
    - sudo apt-add-repository -y ppa:beineri/opt-qt551
    - sudo apt-get update
    - sudo apt-get install gcc-4.8 g++-4.8
    - sudo apt-get install qt55base qt55tools qt55imageformats qt55location qt55declarative libsqlite3-dev qt55svg
    - sudo apt-get install libhdf5-serial-dev libarpack2-dev
    - sudo apt-get install libxml2-dev libboost1.55-dev libboost-math1.55-dev libboost-program-options1.55-dev libboost-test1.55-dev libboost-random1.55-dev libcminpack-dev
    - export CXX=/usr/bin/g++-4.8
    - export CC=/usr/bin/gcc-4.8
    - source /opt/qt55/bin/qt55-env.sh
    - export CMAKE_CXX_COMPILER=/usr/bin/g++-4.8
    - export QMAKE_CXX=/usr/bin/g++-4.8
    - qmake --version
    - mkdir $HOME/depts
    - mkdir $HOME/depts/include
    - mkdir $HOME/depts/bin
    - mkdir $HOME/depts/lib
    - mkdir $HOME/depts/share
    - wget http://iweb.dl.sourceforge.net/project/arma/armadillo-6.200.3.tar.gz
    - tar -xf armadillo-6.200.3.tar.gz
    - cd armadillo-6.200.3
    - ./configure -DINSTALL_LIB_DIR=$HOME/depts/lib -DINSTALL_INCLUDE_DIR=$HOME/depts/include -DINSTALL_DATA_DIR=$HOME/depts/share -DINSTALL_BIN_DIR=$HOME/depts/bin && make && make install
    - cd ../
    - wget http://mlpack.org/files/mlpack-1.0.12.tar.gz
    - tar -xf mlpack-1.0.12.tar.gz
    - cd mlpack-1.0.12 && mkdir build && cd build
    - cmake -DDEBUG=OFF -DPROFILE=OFF -DBOOST_INCLUDEDIR=/usr/include/boost -DCMAKE_INSTALL_PREFIX=$HOME/depts ../
    - make mlpack >/dev/null && make install >/dev/null
    - cd ../../
    - git clone https://github.com/VespucciProject/Vespucci-QCP.git
    - cd Vespucci-QCP
    - qmake -qt=qt5 && make && make install
    - cd ../

script:
    - mkdir build-VespucciLibrary && cd build-VespucciLibrary
    - qmake -qt=qt5 ../Library/VespucciLibrary.pro && make
    - cd ../ && mkdir build-Vespucci && cd build-Vespucci
    - qmake -qt=qt5 ../Vespucci.pro && make
